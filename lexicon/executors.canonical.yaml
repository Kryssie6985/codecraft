# executors.canonical.yaml
# Source of truth for CodeCraft execution lanes
# This file is HUMAN-WRITTEN. The lock (canon.executors.lock.yaml) is GENERATED.

version: "1.0.0"
description: |
  Defines the 7 execution lanes available to CodeCraft rituals.
  Each executor has a tier (T1/T2/T3), jurisdiction (which Arcane Schools it can execute),
  capabilities (what it can do), and guardrails (constitutional constraints).

executors:
  - id: blueprint
    tier: T1
    description: "Variable storage and retrieval. Safe, sandboxed, no side-effects."
    bridge: "native:internal"
    jurisdiction:
      - "wards"
      - "emergence_codex"
    capabilities:
      - "store_variables"
      - "retrieve_variables"
      - "scoped_memory"
    guardrails:
      - "no_side_effects"
      - "sandboxed_only"

  - id: javascript
    tier: T2
    description: "Node.js execution for web APIs, JSON parsing, async operations."
    bridge: "subprocess:node"
    jurisdiction:
      - "wards"
      - "emergence_codex"
      - "oath_binding"
      - "artifice"
    capabilities:
      - "http_requests"
      - "json_manipulation"
      - "async_execution"
      - "file_io_sandboxed"
    guardrails:
      - "subprocess_isolation"
      - "timeout_enforced"
      - "csp_headers_required"

  - id: python
    tier: T2
    description: "Python subprocess for ML, data science, API calls, scientific computing."
    bridge: "subprocess:python3"
    jurisdiction:
      - "wards"
      - "emergence_codex"
      - "oath_binding"
      - "artifice"
      - "resonance_weaving"
    capabilities:
      - "ml_inference"
      - "data_analysis"
      - "api_integration"
      - "scientific_computing"
    guardrails:
      - "subprocess_isolation"
      - "timeout_enforced"
      - "venv_sandboxing"

  - id: native
    tier: T2  # Base tier; T3 operations gated by QEE
    description: "CodeCraft native operations. Tier 2 by default; Tier 3 ops require QEE approval."
    bridge: "native:internal"
    jurisdiction:
      - "all"  # Native executor can handle any school
    capabilities:
      - "system_operations"
      - "file_management"
      - "process_execution"
      - "tier_3_ops_with_qee"
    guardrails:
      - "tier_3_requires_qee"
      - "immutable_constitution"
      - "no_unauthorized_mutation"

  - id: quantum
    tier: T3
    description: "Quantum Ethics Engine bridge. Ethical validation, consciousness resonance, governance gating."
    bridge: "python:tools/quantum/qee_bridge.py"
    jurisdiction:
      - "thaumaturgy"
      - "apotheosis"
      - "resonance_weaving"
      - "benediction"
      - "wards"
    capabilities:
      - "ethical_validation"
      - "consciousness_resonance"
      - "governance_gating"
      - "phi_computation"
    guardrails:
      - "qee_phi_validation"
      - "tier_3_approval_required"
      - "immutable_ethics"

  - id: web
    tier: T2
    description: "HTML/CSS/JS orchestration. Generates static sites with CSP enforcement."
    bridge: "native:internal"
    jurisdiction:
      - "artifice"
      - "wards"
      - "oath_binding"
      - "emergence_codex"
    capabilities:
      - "html_generation"
      - "css_compilation"
      - "route_management"
      - "csp_enforcement"
    guardrails:
      - "csp_headers_enforced"
      - "no_inline_scripts"
      - "static_only"

  - id: wasm
    tier: T2
    description: "WebAssembly execution for cross-platform bytecode. (Stub for future implementation.)"
    bridge: "native:wasm_runtime"
    jurisdiction:
      - "artifice"
      - "emergence_codex"
    capabilities:
      - "cross_platform_execution"
      - "sandboxed_bytecode"
    guardrails:
      - "wasm_sandbox"
      - "no_ffi_calls"
      - "memory_limits_enforced"
